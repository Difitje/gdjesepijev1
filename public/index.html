<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>LOCALO</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splashScreen">
        <h1>DRINKER</h1>
    </div>

    <!-- Omotaƒç za sve ekrane -->
    <div id="appWrapper">
        <!-- AUTH EKRANI -->
        <div class="container" id="intro">
            <h2>üçª Dosadno vam je?</h2>
            <p style="text-align:center;">Pridru≈æi se ekipi koja zna kako se loƒçe!</p>
            <button onclick="swap('intro', 'odabir')">Pridru≈æi se</button>
        </div>
        <div class="container" id="pravilaEkran">
            <button class="back-button" onclick="swap('pravilaEkran', 'odabir')">‚Üê</button>
            <h2>Pravila kori≈°tenja</h2>
            <div class="pravila-text">
                <p>Dobrodo≈°li! Prije nego ≈°to nastavite, molimo vas da pa≈æljivo proƒçitate i prihvatite sljedeƒáa pravila:</p>
                <p><strong>1. Punoljetnost:</strong> Morate imati najmanje 18 godina da biste koristili ovu aplikaciju.</p>
                <p><strong>2. Po≈°tovanje:</strong> Pona≈°ajte se prema drugima s po≈°tovanjem. Bilo kakav oblik uznemiravanja, govora mr≈ænje ili nasilnog pona≈°anja nije dozvoljen i rezultirat ƒáe trajnom zabranom.</p>
                <p><strong>3. Sigurnost na prvom mjestu:</strong> Kada se sastajete s drugim korisnicima, ƒçinite to na javnim i sigurnim mjestima. Obavijestite prijatelja gdje idete. Budite odgovorni.</p>
                <p><strong>4. Zakonitost:</strong> Zabranjeno je organiziranje ili promoviranje bilo kakvih ilegalnih aktivnosti putem ove platforme.</p>
                <p><strong>Odricanje od odgovornosti:</strong> Ova aplikacija je samo platforma za povezivanje. Mi, kao kreatori, nismo odgovorni za pona≈°anje korisnika, niti za bilo kakve direktne ili indirektne posljedice, ≈°tete ili povrede koje mogu nastati kao rezultat kori≈°tenja aplikacije. Koristite je na vlastitu odgovornost.</p>
            </div>
            <div class="pravila-checkbox-wrapper">
                <input type="checkbox" id="prihvatamPravila" onchange="proveriPrihvatanje()">
                <label for="prihvatamPravila">Proƒçitao/la sam i prihvaƒáam pravila.</label>
            </div>
            <button id="nastaviBtn" onclick="swap('pravilaEkran', 'registracija')" disabled>Prihvati i nastavi</button>
        </div>
        <div class="container" id="odabir">
            <h2>Dobrodo≈°li!</h2>
            <p style="text-align:center;">Ima≈° raƒçun? Prijavi se. Nema≈°? Registriraj se.</p>
            <button onclick="swap('odabir', 'login')">Prijava</button>
            <button onclick="swap('odabir', 'pravilaEkran')">Registracija</button>
        </div>
        <div class="container" id="login">
            <button class="back-button" onclick="swap('login', 'odabir')">‚Üê</button>
            <h2>Prijava</h2>
            <input id="loginIme" placeholder="Korisniƒçko ime" />
            <input id="loginSifra" type="password" placeholder="Lozinka" />
            <button id="loginSubmitBtn" onclick="ulogujSe()">Prijavi se</button>
        </div>
        <div class="container" id="registracija">
            <button class="back-button" onclick="swap('registracija', 'pravilaEkran')">‚Üê</button>
            <h2>Registracija</h2>
            <input id="ime" placeholder="Korisniƒçko ime" />
            <input id="sifra" type="password" placeholder="Lozinka" />
            <label>Profilna slika:</label>
            <input type="file" id="slikaUpload" accept="image/*" />
            <img id="previewSlike" class="preview-slika" />
            <input id="instagram" placeholder="Instagram korisniƒçko ime (bez @)" />
            <input id="tiktok" placeholder="TikTok korisniƒçko ime (bez @)" />
            <textarea id="opis" placeholder="O meni..." rows="3"></textarea>
            <button id="registracijaSubmitBtn" onclick="registruj()">Spremi</button>
        </div>
        
        <!-- GLAVNI EKRAN APLIKACIJE -->
        <div class="app-shell" id="mainAppView">
            <header class="main-header">
                <div class="header-left">
                    <a href="#" onclick="otvoriProfil(trenutniKorisnik.id)">
                        <img src="https://placehold.co/80x80/1e1e1e/a0a0a0?text=..." alt="Profilna slika" class="header-profile-avatar" id="headerProfilePic">
                    </a>
                </div>
                <div class="header-center">
                    <h1 class="header-title">LOCALO</h1>
                </div>
                <div class="header-right">
                    <button class="header-action-icon" aria-label="Poruke" onclick="prikaziInbox()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48H40a16,16,0,0,0-16,16V176a16,16,0,0,0,16,16h48.37a15.8,15.8,0,0,1,11.31,4.69l31.25,31.25a8,8,0,0,0,11.32,0l31.25-31.25A15.8,15.8,0,0,1,187.63,192H216a16,16,0,0,0,16-16V64A16,16,0,0,0,216,48Zm0,128H187.63a31.79,31.79,0,0,0-22.63,9.37L128,222.63,90.9,185.37A31.79,31.79,0,0,0,68.27,176H40V64H216Z"></path></svg>
                        <span id="inbox-notification-dot" class="notification-dot-header"></span>
                    </button>
                </div>
            </header>
            <main class="content-area" id="pijankeContainer">
                <div id="pijankePregled"></div>
            </main>
            <footer class="bottom-nav">
                <button class="add-party-btn" aria-label="Objavi pijanku" onclick="pokaziObjavu()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 256 256"><path d="M239.3,71.3l-32-32a8,8,0,0,0-11.3,0l-16,16a8,8,0,0,0,0,11.3L202.7,99.3a8,8,0,0,0,11.3,0l16-16A8,8,0,0,0,239.3,71.3ZM208,116.7a8,8,0,0,0-8,8V216H48V88h85.3a8,8,0,0,0,5.7-2.3l24-24a8,8,0,0,0-11.4-11.4L128,73.9V40a8,8,0,0,0-8-8H40A16,16,0,0,0,24,48V216a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V124.7A8,8,0,0,0,208,116.7ZM96,168a8,8,0,0,1-16,0,24,24,0,0,0-48,0,8,8,0,0,1-16,0,40,40,0,0,1,80,0ZM192,168a8,8,0,0,1-16,0,24,24,0,0,0-48,0,8,8,0,0,1-16,0,40,40,0,0,1,80,0Z"></path></svg>
                </button>
            </footer>
        </div>
        
        <!-- OVERLAY EKRANI -->
        <div class="overlay-screen" id="overlayHost">
            <div class="overlay-header">
                <button class="back-button" onclick="zatvoriOverlay()">
                     <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 256 256"><path d="M165.7,202.3a8.1,8.1,0,0,1-11.4,0L96,144H48a8,8,0,0,1-8-8V120a8,8,0,0,1,8-8H96l58.3-58.3a8.1,8.1,0,0,1,11.4,11.4L119.3,128l46.4,46.3A8.1,8.1,0,0,1,165.7,202.3Z"></path></svg>
                </button>
                <h2 id="overlayNaslov"></h2>
            </div>
            <div class="overlay-content" id="overlayContent"></div>
        </div>

        <div class="overlay-screen" id="chatOverlay">
            <div class="overlay-header">
                <button class="back-button" onclick="zatvoriOverlay()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 256 256"><path d="M165.7,202.3a8.1,8.1,0,0,1-11.4,0L96,144H48a8,8,0,0,1-8-8V120a8,8,0,0,1,8-8H96l58.3-58.3a8.1,8.1,0,0,1,11.4,11.4L119.3,128l46.4,46.3A8.1,8.1,0,0,1,165.7,202.3Z"></path></svg>
                </button>
                <div class="chat-header-info">
                    <h2 id="chatSaKorisnikom"></h2>
                    <p id="chatPartnerStatus" class="status-text"></p>
                </div>
            </div>
            <div class="overlay-content chat-log-container" id="privatniChatLog"></div>
            <div class="chat-input-area">
                <textarea id="privatniInput" placeholder="Upi≈°i poruku..." rows="1"></textarea>
                <button id="posaljiPrivatnoBtn" onclick="posaljiPrivatno()">Po≈°alji</button>
            </div>
        </div>
    </div>
    <script src="/script.js"></script>
</body>
</html>