<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gdje se pije? (beta)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            display: none; /* Svi kontejneri su sakriveni po defaultu */
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
            flex-direction: column;
            gap: 10px;
        }
        input, textarea, button {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 16px;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            width: 100%;
        }
        button:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        h1, h2 {
            color: #333;
        }
        .back-button {
            position: absolute;
            top: 15px;
            left: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            width: auto;
        }
        .pravila-text { text-align: left; }
        .preview-slika { max-width: 100px; max-height: 100px; margin-top: 10px; }
        .controls-bottom {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
        }
        .action-icon {
            font-size: 24px;
            background: #fff;
            border-radius: 50%;
            border: 1px solid #ccc;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .large-action-icon {
            width: 80px;
            height: 80px;
            font-size: 40px;
        }
    </style>
</head>
<body>

    <div id="splashScreen" class="container">
        <h1>DRINKER</h1>
    </div>

    <div class="container" id="intro">
        <h2>üçª Dosadno vam je?</h2>
        <p style="text-align:center;">Pridru≈æi se ekipi koja zna kako se loƒçe!</p>
        <button onclick="swap('intro', 'odabir')">Pridru≈æi se</button>
    </div>

    <div class="container" id="pravilaEkran">
        <button class="back-button left-aligned" onclick="swap('pravilaEkran', 'odabir')">‚Üê</button>
        <h2>Pravila kori≈°tenja</h2>
        <div class="pravila-text">
            <p>Dobrodo≈°li! Prije nego ≈°to nastavite, molimo vas da pa≈æljivo proƒçitate i prihvatite sljedeƒáa pravila:</p>
            <p><strong>1. Punoljetnost:</strong> Morate imati najmanje 18 godina da biste koristili ovu aplikaciju.</p>
            <p><strong>2. Po≈°tovanje:</strong> Pona≈°ajte se prema drugima s po≈°tovanjem.</p>
            <p><strong>3. Sigurnost na prvom mjestu:</strong> Kada se sastajete s drugim korisnicima, ƒçinite to na javnim i sigurnim mjestima.</p>
            <p><strong>4. Zakonitost:</strong> Zabranjeno je organiziranje ilegalnih aktivnosti.</p>
            <p><strong>Odricanje od odgovornosti:</strong> Koristite aplikaciju na vlastitu odgovornost.</p>
        </div>
        <div>
            <input type="checkbox" id="prihvatamPravila" onchange="proveriPrihvatanje()">
            <label for="prihvatamPravila">Proƒçitao/la sam i prihvaƒáam pravila.</label>
        </div>
        <button id="nastaviBtn" onclick="swap('pravilaEkran', 'registracija')" disabled>Prihvati i nastavi</button>
    </div>

    <div class="container" id="odabir">
        <h2>Dobrodo≈°li!</h2>
        <p style="text-align:center;">Ima≈° raƒçun? Prijavi se. Nema≈°? Registriraj se.</p>
        <button onclick="swap('odabir', 'login')">Prijava</button>
        <button onclick="swap('odabir', 'pravilaEkran')">Registracija</button>
    </div>

    <div class="container" id="login">
        <button class="back-button left-aligned" onclick="swap('login', 'odabir')">‚Üê</button>
        <h2>Prijava</h2>
        <input id="loginIme" placeholder="Korisniƒçko ime" />
        <input id="loginSifra" type="password" placeholder="Lozinka" />
        <button id="loginSubmitBtn" onclick="ulogujSe()">Prijavi se</button>
    </div>

    <div class="container" id="registracija">
        <button class="back-button left-aligned" onclick="swap('registracija', 'pravilaEkran')">‚Üê</button>
        <h2>Registracija</h2>
        <input id="ime" placeholder="Korisniƒçko ime" />
        <input id="sifra" type="password" placeholder="Lozinka" />
        <label style="font-size:14px; display:block; margin-bottom:5px;">Profilna slika:</label>
        <input type="file" id="slikaUpload" accept="image/*" />
        <img id="previewSlikes" class="preview-slika" />
        <input id="instagram" placeholder="Instagram korisniƒçko ime (bez @)" />
        <input id="tiktok" placeholder="TikTok korisniƒçko ime (bez @)" />
        <textarea id="opis" placeholder="O meni..." rows="3"></textarea>
        <button id="registracijaSubmitBtn" onclick="registruj()">Spremi</button>
    </div>

    <div class="container" id="lokacijePrikaz">
        <h2>üç∫ Trenutno pije:</h2>
        <div id="pijankePregled"></div>
        <div class="controls-bottom">
            <button id="objaviPijankuBtn" class="action-icon large-action-icon" onclick="pokaziObjavu()">üç∫</button>
            <button id="settingsBtn" class="action-icon" onclick="pokaziPostavkeEkran()">‚öôÔ∏è</button>
        </div>
    </div>

    <div class="container" id="inboxPrikaz">
        <button class="back-button left-aligned" onclick="zatvoriEkran('inboxPrikaz', 'lokacijePrikaz')">‚Üê</button>
        <h2>Poruke</h2>
        <div id="listaChatova"></div>
    </div>

    <div class="container" id="postavkeEkran">
        <button class="back-button left-aligned" onclick="zatvoriEkran('postavkeEkran', 'lokacijePrikaz')">‚Üê</button>
        <h2>Postavke</h2>
        <a href="#" class="btn-full" onclick="prikaziInbox(); return false;">Poruke <span id="notifikacijaPorukaSettings" class="notification-badge"></span></a>
        <a href="#" class="btn-full" onclick="prikaziEditProfila(); return false;">Moj profil</a>
        <a href="#" class="btn-full" onclick="odjaviSe(); return false;" id="odjaviSeBtn">Odjavi se</a>
    </div>

    <div class="container" id="glavniDio">
        <button class="back-button left-aligned" onclick="zatvoriEkran('glavniDio', prethodniEkran)">‚Üê</button>
        
        <h2>Objavi pijanku</h2> 

        <div id="objavaForma">
            <textarea id="opisPijanke" placeholder="Opis pijanke (npr: nas 5 kod mene üî•)"></textarea>
            <button onclick="objaviPijanku()">Objavi</button>
        </div>
        <div id="profilKorisnika"></div>
    </div>

    <div class="container" id="privatniChat">
        <button class="back-button left-aligned" onclick="zatvoriEkran('privatniChat', prethodniEkran)">‚Üê</button>
        <div class="chat-header-info">
            <h2 id="chatSaKorisnikom"></h2>
            <p id="chatPartnerStatus" class="status-text"></p>
        </div>
        <div id="privatniChatLog" class="chat"></div>
        <div class="chat-input-area">
            <textarea id="privatniInput" placeholder="Upi≈°i poruku..." rows="2"></textarea>
            <button id="posaljiPrivatnoBtn" onclick="posaljiPrivatno()">Po≈°alji</button>
        </div>
    </div>

    <div class="container" id="editProfil">
        <button class="back-button left-aligned" onclick="zatvoriEkran('editProfil', 'postavkeEkran')">‚Üê</button>
        <h2>Uredi profil</h2>
        <div style="text-align:center;">
            <img id="previewEditSlike" class="profilna-slika" />
        </div>
        <input id="editIme" placeholder="Korisniƒçko ime" />
        <textarea id="editOpis" placeholder="O meni..." rows="3"></textarea>
        <input id="editInstagram" placeholder="Instagram korisniƒçko ime" />
        <input id="editTiktok" placeholder="TikTok korisniƒçko ime" />
        <label style="font-size:14px; display:block; margin-bottom:5px;">Promijeni profilnu sliku:</label>
        <input type="file" id="editSlikaUpload" accept="image/*" />
        <button id="sacuvajProfilBtn" onclick="sacuvajProfil()">Spremi promjene</button>
    </div>

    <script>
        // Globalna varijabla za praƒáenje prethodnog ekrana
        let prethodniEkran = 'lokacijePrikaz'; 

        // Funkcija za prebacivanje izmeƒëu ekrana
        function swap(hideId, showId) {
            const hideElement = document.getElementById(hideId);
            const showElement = document.getElementById(showId);

            if (hideElement) hideElement.style.display = 'none';
            if (showElement) showElement.style.display = 'flex'; // Koristimo flex da se sadr≈æaj centrira

            // Postavi prethodni ekran za gumb "nazad"
            if (showId === 'glavniDio' || showId === 'privatniChat' || showId === 'postavkeEkran') {
                prethodniEkran = hideId;
            }
        }

        // Funkcija koja se poziva kad se klikne gumb za objavu pijanke
        function pokaziObjavu() {
            swap('lokacijePrikaz', 'glavniDio');

            // --- RJE≈†ENJE TVOG PROBLEMA ---
            // Pronalazi h2 tag unutar 'glavniDio' i postavlja mu tekst.
            // Ovo osigurava da je naslov ispravan svaki put kad se forma otvori.
            document.querySelector('#glavniDio h2').innerText = 'Objavi pijanku';

            // Prikazujemo formu za objavu, a sakrivamo prikaz profila (ako je bio otvoren)
            document.getElementById('objavaForma').style.display = 'block';
            document.getElementById('profilKorisnika').style.display = 'none';
        }

        function zatvoriEkran(trenutniEkranId, prethodniEkranId) {
            swap(trenutniEkranId, prethodniEkranId);
        }

        function proveriPrihvatanje() {
            const checkbox = document.getElementById('prihvatamPravila');
            const button = document.getElementById('nastaviBtn');
            button.disabled = !checkbox.checked;
        }

        function pokaziPostavkeEkran() {
            swap('lokacijePrikaz', 'postavkeEkran');
        }

        // Prikaz poƒçetnog ekrana nakon splash screena
        window.onload = () => {
            const splash = document.getElementById('splashScreen');
            const intro = document.getElementById('intro');
            
            splash.style.display = 'flex'; // Poka≈æi splash na poƒçetku
            
            setTimeout(() => {
                swap('splashScreen', 'intro'); // Nakon 2 sekunde, prebaci na intro
            }, 2000);
        };
        
        // --- OSTALE FUNKCIJE (Placeholderi) ---
        // Dodaj svoju logiku unutar ovih funkcija
        function ulogujSe() { 
            alert('Logika za prijavu ide ovdje.');
            swap('login', 'lokacijePrikaz'); // Primjer prebacivanja nakon prijave
        }
        function registruj() { 
            alert('Logika za registraciju ide ovdje.');
            swap('registracija', 'lokacijePrikaz'); // Primjer prebacivanja nakon registracije
        }
        function objaviPijanku() { 
            alert('Logika za objavu pijanke ide ovdje.'); 
            zatvoriEkran('glavniDio', 'lokacijePrikaz');
        }
        function prikaziInbox() { swap('postavkeEkran', 'inboxPrikaz'); }
        function prikaziEditProfila() { swap('postavkeEkran', 'editProfil'); }
        function odjaviSe() { 
            alert('Logika za odjavu ide ovdje.'); 
            swap('postavkeEkran', 'odabir');
        }
        function posaljiPrivatno() { alert('Logika za slanje privatne poruke.'); }
        function sacuvajProfil() { 
            alert('Logika za spremanje profila.'); 
            zatvoriEkran('editProfil', 'postavkeEkran');
        }

    </script>

</body>
</html>